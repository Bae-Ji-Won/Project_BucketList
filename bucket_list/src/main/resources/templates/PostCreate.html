<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시물 작성</title>
</head>
<body>
<form  class="container" action="/post/save" method="post">
<table>
  <tr>
    <th>제목</th>
    <td><input type="text" name="post" value="title" /></td>
  </tr>
  <tr>
    <th>모집기간</th>
    <td><input type="text" name="post" value="untilRecruit"/></td>
  </tr>
  <tr>
    <th>일정</th>
    <td><input type="text" name="post" value="date" /></td>
  </tr>
  <tr>
    <th>모집인원</th>
    <td><input type="text" name="post" value="member" /></td>
  </tr>
  <tr>
    <th>카테고리</th>
    <td><input type="text" name="post" value="category"/></td>
  </tr>
  <tr>
    <th>주소</th>
    <td><input type="text" id="address_kakao" name="address" readonly /></td>
  </tr>
  <tr>
    <th>내용</th>
    <td><input type="text" name="post" value="content" /></td>
  </tr>
<!--  <tr>-->
<!--    <th>상세 주소</th>-->
<!--    <td><input type="text" name="address_detail" /></td>-->
<!--  </tr>-->
</table>
  <input type="submit" id="submit" value="입력" >
</form>
</body>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
      //카카오 지도 발생
      new daum.Postcode({
        oncomplete: function(data) { //선택시 입력값 세팅
          document.getElementById("address_kakao").value = data.address; // 주소 넣기
          document.querySelector("input[name=post]").focus(); //상세입력 포커싱
        }
      }).open();
    });
  }
</script>

<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function(){
    $("#submit").click(function() {
      // 게시물 배열 선언
      var PostArray = [];
      $('input[name="post"]:checked').each(function(i){//체크된 리스트 저장
        PostArray.push($(this).val());
      });


      var objParams = {
        // "postList"  : PostArray, // 게시물 저장
        "address" : $("#address_kakao").val(),  // 주소 저장
      };


      //ajax 호출
      $.ajax({
        url         :   "/post/save",
        dataType    :   "json",
        contentType :   "application/json",
        type        :   "post",
        data        :   JSON.stringify(objParams),
        success     :   function(retVal){

          if(retVal.code == "OK") {
            alert(retVal.message);
          } else {
            alert(retVal.message);
          }

        },
        error       :   function(request, status, error){
          console.log("AJAX_ERROR");
        }
      });
    })
  });
</script>
</html>