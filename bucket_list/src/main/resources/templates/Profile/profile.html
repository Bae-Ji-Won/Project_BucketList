<!DOCTYPE html>
<html lang="ko">

<head>

    <!-- SITE TITTLE -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BucketList</title>

    <!-- Plugins css Style -->
    <link href='/assets/plugins/fontawesome-5.15.2/css/all.min.css' rel='stylesheet'>
    <link href='/assets/plugins/fontawesome-5.15.2/css/fontawesome.min.css' rel='stylesheet'>
    <link href="/assets/plugins/animate/animate.css" rel="stylesheet">
    <link href="/assets/plugins/menuzord/css/menuzord.css" rel="stylesheet">
    <link href="/assets/plugins/menuzord/css/menuzord-animations.css" rel="stylesheet">

    <link href='/assets/plugins/isotope/isotope.min.css' rel='stylesheet'>
    <link href='/assets/plugins/fancybox/jquery.fancybox.min.css' rel='stylesheet'>

    <link href='/assets/plugins/selectric/selectric.css' rel='stylesheet'>
    <link href='/assets/plugins/daterangepicker/css/daterangepicker.css' rel='stylesheet'>

    <link href='/assets/plugins/dzsparallaxer/dzsparallaxer.css' rel='stylesheet'>

    <link href='/assets/plugins/revolution/css/settings.css' rel='stylesheet'>

    <!-- GOOGLE FONT -->
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700' rel='stylesheet'>

    <!-- CUSTOM CSS -->
    <link href="/assets/css/star.css" id="option_style" rel="stylesheet">
    <link href="/assets/css/custom.css" id="custom_style" rel="stylesheet">

    <!-- FAVICON -->
    <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png"/>

    <!-- 커스텀 css -->
    <link href="css/profile.css" rel="stylesheet">


</head>

<style>
    #user-name-li {
        display: none;
    }
</style>

<!-- 돋보기 클릭하면 보이기랑 안보이기 -->
<script>
    let check = false;

    function showSearch() {
        let search = document.getElementById("search-wrapper");
        if (!check) {
            search.style.display = "block";
            check = true;
        } else {
            search.style.display = "none";
            check = false;
        }
    }
</script>

<script>
    // window.onload : 윈도우가 실행되면 무조건 진행(?)되는 부분
    // const : bock단위의 상수
    window.onload = function () {
        // "accessToken"으로 부터 값 가져오기
        const accessToken = localStorage.getItem("accessToken");

        if (accessToken === null) {
            $("#login-li").show();
            $("#user-name-li").hide();
        } else {
            $("#login-li").hide();
            $("#user-name-li").show();

            // payload는 디코딩 가능한 부분 + username이랑 또 머드라.. 그걸 재현 님이 넣어두심
            // .을 기준으로 split해서 배열에 담고 1번째 배열의 값을 payload에 대입
            const payload = accessToken.split('.')[1];
            // let: 지역변수
            // JSON.parse는 json형태로 변환(?)
            // atob() 괄호 안의 내용을 디코딩
            // 디코딩된 내용에서 userName을 가져오겠다!
            // {'memberId':1, 'userName':2}
            let userName = JSON.parse(atob(payload)).userName;
            document.getElementById("userName").innerText = userName;
        }

    };
</script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<!-- ?? -->
<script>
    function click() {
        console.log('click');
        axios.get('/click')
            .then((res) => {
                console.log(res.data);
            })
            .catch((err) => {
                console.log(err);
            })
    }

    function login() {
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        return fetch('/login', {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Accept": "appliction/json"
                },
                body: JSON.stringify({
                    email: email,
                    password: password
                })
            }
        )
            .then(response => {
                response.json();
            })
            .then(json => {
                localStorage.setItem("accessToken", json.result.accessToken);
            })
            .catch(error => {
                console.log(error);
            })
    }

    function logout() {
        localStorage.clear()
        window.location.href = "/"; // 첫 화면으로 이동
    }
</script>

<body id="body" class="up-scroll">

<!-- ====================================
——— HEADER
===================================== -->
<header class="header" id="pageTop">
    <!-- Menu Zord -->
    <nav class="nav-menuzord navbar-sticky">
        <div class="container clearfix">
            <div id="menuzord" class="menuzord">
                <a href="/" class="menuzord-brand">
                    <img class="lazyestload" data-src="/assets/img/logo-color-big.png"
                         src="/assets/img/logo-color-big.png" alt="logo-img">
                </a>

                <ul class="menuzord-menu menuzord-right">
                    <li class="">
                        <a class="" href="/chat/room/list">채팅방</a>
                    </li>

                    <li class="">
                        <a class="" href="javascript:void(0)">버킷리스트</a>
                        <ul class="dropdown drop-up">
                            <li class="">
                                <a href="/post">All</a>
                            </li>

                            <li class="">
                                <a href="/post?category=travel">Travel</a>
                            </li>

                            <li class="">
                                <a href="/post?category=extreme">Extreme</a>
                            </li>

                            <li class="">
                                <a href="/post?category=study">Study</a>
                            </li>

                            <li class="">
                                <a href="/post?category=volunteer">Volunteer</a>
                            </li>

                            <li class="">
                                <a href="/post?category=experience">Experience</a>
                            </li>

                            <li class="">
                                <a href="/post?category=etc">Etc</a>
                            </li>
                        </ul>
                    </li>

                    <li class="" id="login_li">
                        <a class="" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#login">로그인</a>
                    </li>

                    <li class="" id="user_li">
                        <a class="" href="javascript:void(0)" id="userName">유저명</a>
                        <ul class="dropdown drop-up">
                            <li class="">
                                <a href="/post/createform">버킷리스트 작성</a>
                            </li>

                            <li class="">
                                <a href="/my/likes">좋아요</a>
                            </li>

                            <li class="">
                                <a href="/my">마이 피드</a>
                            </li>

                            <li class="">
                                <a th:href="@{/profile/{memberId} (memberId=${memberId})}">프로필</a>
                            </li>

                            <li class="">
                                <a href="#" onclick="logout(); return false;">로그아웃</a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="main-wrapper packages-list-left-sidebar">

    <!-- ====================================
    ——— PROFILE SECTION
    ===================================== -->
    <section class="py-9">
        <div class="container">
            <div class="hover-profile mb-7 mb-lg-9">
                <div class="row">
                    <div class="col-md-6 col-lg-5 col-xl-4">
                        <div class="left-image">
                            <!-- 모달 창 띄우기 위한 수정 버튼 및 사진 출력-->
                            <div class="pic-wrap">
                                <button id="pic-btn" class="pic-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                         class="bi bi-pencil-square" viewBox="0 0 16 16">
                                        <path
                                                d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                        <path fill-rule="evenodd"
                                              d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                                    </svg>
                                </button>

                                <!-- 실제로 수정이 이루어지는 모달 창 -->
                                <div id="myModal" class="modal">
                                    <div class="modal-content">
                                        <span class="close">&times;</span>
                                        <div class="container">
                                            <h2>Put your wonderful Image</h2>
                                            <div class="form-group">
                                                <input type="file" id="fileInput" multiple>
                                                <div id="imagePreview"></div>
                                                <br><br>

                                            </div>
                                            <button id="uploadBtn">Upload</button>
                                        </div>
                                    </div>
                                </div>

                        </div>
                    </div>

                        <div class="right-information">
                        <div class="d-flex justify-content-between align-items-baseline">
                            <div class="mb-6 mb-md-4 mb-lg-6">
                                <h2 class="text-uppercase font-weight-bold" th:text="${member.getUserName()}"></h2>
                            </div>
                        </div>
                        <ul class="list-unstyled">
                            <li class="media media-profile-list">
                                <strong>이메일 : </strong>

                                <div class="media-body ms-2">
                                    <p class="text-gray-color hover-text-primary"
                                       th:text="${member.getEmail()}"></p>
                                </div>
                            </li>

                            <li class="media media-profile-list">
                                <strong>평점 : </strong>

                                <div class="media-body ms-2">
                                    <p class="text-gray-color hover-text-primary" th:text="${member.getRate()}"></p>
                                </div>
                            </li>


                        </ul>
                    </div>
                        <div class="distance"></div>

                    </div>

                <!-- Contact Section -->
                <div class="bg-smoke p-2 mb-7 mb-lg-9" style="height: 470px">
                    <div class="mb-7 mb-lg-9 h-100">
                        <h3 class="text-uppercase font-weight-bold mb-4">리뷰</h3>
                        <p class="line-height-26 mb-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                            nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
                            irure
                            dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                            sintoccaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est
                            laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem</p>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </section>

</div><!-- element wrapper ends -->

<!-- ====================================
——— FOOTER SECTION
===================================== -->
<footer class="footer">
    <div class="footer-bg-color py-9">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-lg-3 mb-7 mb-lg-0">
                    <a class="d-inline-block" href="../index.html">
                        <div class="col-md-6 col-lg-3 mb-5 mb-lg-0 mx-5">
                            <a class="d-inline-block" href="index.html">
                                <img class="w-100 mb-6 lazyestload" data-src="/assets/img/logo-color-sm.png"
                                     src="/assets/img/logo-color-sm.png" alt="img">
                            </a>
                            <p class="mb-0">멋쟁이 사자처럼 백엔드 스쿨 2기에서 진행한 팀프로젝트입니다.
                                버킷리스트를 주제로 비슷한 목표를 가진 사람들이 모여 값진 경험을 할 수 있는 사이트를 구현했습니다.
                                글을 작성하여 사람을 모집할 수 있으며 버킷리스트 개설자는 참가 신청한 참가자를 허가/거부할 수 있습니다.
                                모집이 완료되면 채팅이 활성화되고 일정을 마친 후에 참가자는 버킷리스트와 호스트에 대해서 평가할 수 있습니다.
                            </p>
                        </div>

                        <!--각자 깃랩 링크 걸건지?-->
                        <div class="col-md-6 col-lg-3 mt-md-4 mb-5 mb-lg-0 mx-7">
                            <div class="title-tag">
                                <h6>Team9 : WEB (WE are Best)</h6>
                            </div>
                            <ul class="list-unstyled mb-0">
                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">PM : 최수정</a>
                                    </div>
                                </li>
                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">CTO : 정재현</a>
                                    </div>
                                </li>

                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">개발 : 고관운</a>
                                    </div>
                                </li>

                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">개발 : 박은빈</a>
                                    </div>
                                </li>

                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">개발 : 배지원</a>
                                    </div>
                                </li>

                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-user"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="#" target="_blank">개발 : 변지환</a>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="col-md-6 col-lg-3 mt-md-4 mb-5 mb-lg-0 mx-5">
                            <div class="title-tag">
                                <h6>Contact us</h6>
                            </div>
                            <ul class="list-unstyled mb-0">
                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-brands fa-gitlab"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="https://gitlab.com/S2uJeong1/bucketlist" target="_blank">team project
                                            gitlab</a>
                                    </div>
                                </li>

                                <li class="media mb-2">
                                    <div class="me-3">
                                        <i class="fa-regular fa-file"></i>
                                    </div>
                                    <div class="media-body">
                                        <a href="https://ringed-suggestion-46f.notion.site/ceff928e9f1f4e2482f07387b997f593"
                                           target="_blank">team project notion</a>
                                    </div>
                                </li>
                            </ul>
                        </div>

        <div class="copyright py-6">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6 order-1 order-md-0">
                        <p class="mb-0 mb-md-0 text-md-start">Copyright &copy; <span id="copy-year"></span> All Rights
                            Reserved by
                            <a href="http://www.iamabdus.com/" target="_blank">Abdus</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
        <script>
            var d = new Date();
            var year = d.getFullYear();
            document.getElementById("copy-year").innerHTML = year;
        </script>
</footer>


<!-- ====================================
——— MODAL SECTION
===================================== -->
<!-- Signup Modal -->
<div class="modal fade" id="signup" tabindex="-1" role="dialog" aria-label="signupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header rounded">
                <h3 class="modal-title text-uppercase font-weight-bold">회원가입</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form class="" action="index.html" method="post">
                    <div class="mb-3">
                        <div class="mb-3" style="display: flex">
                            <input type="id" class="form-control bg-smoke" required="" placeholder="아이디">
                            <button class="btn btn-facebook btn-block text-uppercase text-white" type="submit"
                                    style="width: 25%; padding: 0">중복확인
                            </button>
                        </div>
                    </div>

                    <div class="mb-3">
                        <input type="password" class="form-control bg-smoke" required="" placeholder="비밀번호">
                        <input type="password" class="form-control bg-smoke" required="" placeholder="비밀번호 확인">
                    </div>

                    <div class="mb-3" style="display: flex">
                        <input style="flex: 1;" type="year" class="form-control bg-smoke" required=""
                               placeholder="년(4자)">
                        <input style="flex: 1;" type="month1" class="form-control bg-smoke" required="" placeholder="월">
                        <input style="flex: 1;" type="day" class="form-control bg-smoke" required="" placeholder="일">
                    </div>

                    <div class="mb-3">
                        <div style="display: flex">
                            <input style="flex: auto;" type="email" class="form-control bg-smoke" required=""
                                   placeholder="이메일">
                            <button class="btn btn-facebook btn-block text-uppercase text-white" type="submit"
                                    style="width: 25%; padding: 0">인증요청
                            </button>
                        </div>
                        <input type="emailCheck" class="form-control bg-smoke" required="" placeholder="인증번호">
                    </div>

                    <div class="mb-3 form-check mb-0">
                        <input type="checkbox" class="form-check-input" id="exampleCheck4">
                        <label class="form-check-label text-gray-color mb-3" for="exampleCheck4">
                            I agree to the terms of use and privacy.
                        </label>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-block text-uppercase">가입하기</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Login Modal -->
<div class="modal fade" id="login" tabindex="-1" role="dialog" aria-label="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header rounded">
                <h3 class="modal-title text-uppercase font-weight-bold">로그인</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form class="" action="index.html" method="post">
                    <div class="mb-3">
                        <input type="email" class="form-control bg-smoke" required="" placeholder="이메일">
                    </div>

                    <div class="mb-3">
                        <input type="password" class="form-control bg-smoke" required="" placeholder="비밀번호">
                    </div>

                    <!--              <div class="mb-3 form-check mb-0">-->
                    <!--                <input type="checkbox" class="form-check-input" id="exampleCheck5">-->
                    <!--                <label class="form-check-label text-gray-color mb-3" for="exampleCheck5">-->
                    <!--                  Remember me-->
                    <!--                </label>-->
                    <!--                <a class="pull-right" href="javascript:void(0)">Fogot Password?</a>-->
                    <!--             </div>-->

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary text-uppercase">Login</button>
                    </div>

                    <div class="text-uppercase text-center py-3">Or</div>

                    <div style="display: flex;">
                        <div style="flex: 1;">
                            <a href="/login/google"><img src="/assets/img/google-button.png"
                                                         style="width: 95%; margin-left: 5%"></a>
                        </div>
                        <div style="flex: 1;">
                            <a href="/login/naver"><img src="/assets/img/naver-button.png"
                                                        style="width: 85%; float: right; margin-right: 10%"></a>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer justify-content-center">
                <p class="mb-1">Don’t have an Account? <a href="javascript:void(0)" data-bs-dismiss="modal"
                                                          data-bs-toggle="modal" data-bs-target="#signup">Sign up</a>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- INQUIRY IN MODAL -->
<div class="modal fade" id="inquiry" tabindex="-1" role="dialog" aria-label="inquiryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header rounded">
                <h3 class="modal-title text-uppercase font-weight-bold">Inquiry about tour</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body pb-3">
                <form class="" action="index.html" method="post">
                    <div class="mb-3">
                        <input type="text" class="form-control bg-smoke" required="" placeholder="Your Name">
                    </div>

                    <div class="mb-3">
                        <input type="email" class="form-control bg-smoke" required="" placeholder="Your Email">
                    </div>

                    <div class="mb-3">
                        <input type="number" class="form-control bg-smoke" required="" placeholder="Phone Number">
                    </div>

                    <div class="mb-3">
                        <textarea class="form-control bg-smoke" rows="6" placeholder="Message"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary text-uppercase">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- image update IN MODAL -->
<div class="modal fade" id="image-update" tabindex="-1" role="dialog" aria-label="image-update" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header rounded">
                <h3 class="modal-title text-uppercase font-weight-bold">image-update</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body pb-3">
                <form class="" action="index.html" method="post">
                    <div class="mb-3">
                        <input type="text" class="form-control bg-smoke" required="" placeholder="image">
                    </div>
                    <button type="submit" class="btn btn-primary text-uppercase">Update</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Javascript -->
<script src="/assets/plugins/jquery/jquery-3.4.1.min.js"></script>
<script src="/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/plugins/menuzord/js/menuzord.js"></script>

<script src='/assets/plugins/isotope/isotope.min.js'></script>
<script src='/assets/plugins/images-loaded/js/imagesloaded.pkgd.min.js'></script>
<script src='/assets/plugins/fancybox/jquery.fancybox.min.js'></script>

<script src='/assets/plugins/selectric/jquery.selectric.min.js'></script>
<script src='/assets/plugins/daterangepicker/js/moment.min.js'></script>
<script src='/assets/plugins/daterangepicker/js/daterangepicker.min.js'></script>

<script src="/assets/plugins/lazyestload/lazyestload.js"></script>
<script src='/assets/plugins/dzsparallaxer/dzsparallaxer.js'></script>


<script src='/assets/plugins/revolution/js/jquery.themepunch.tools.min.js'></script>
<script src='/assets/plugins/revolution/js/jquery.themepunch.revolution.min.js'></script>
<script src="/assets/plugins/smoothscroll/SmoothScroll.js"></script>

<script src="/assets/js/star.js"></script>

<script src="/assets/js/custom.js"></script>

</body>

<script>
    window.onload = function () {
        const accessToken = localStorage.getItem("accessToken");

        if (accessToken === null) {
            $("#login_li").show();
            $("#user_li").hide();
        } else {
            $("#login_li").hide();
            $("#user_li").show();

            const payload = accessToken.split('.')[1];
            let userName = JSON.parse(atob(payload)).userName;
            document.getElementById("userName").innerText = userName;
        }

    };
</script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
    function click() {
        console.log('click');
        axios.get('/click')
            .then((res) => {
                console.log(res.data);
            })
            .catch((err) => {
                console.log(err);
            })
    }

    function logout() {
        localStorage.clear();
        window.location.href = '/';
        // return axios.post('/logout')
        //         .then((res) => {
        //           localStorage.clear();
        //           window.location.href = '/';
        //         })
    }

    function login() {

        let email = document.getElementById('email').value;
        let pw = document.getElementById('password').value;

        return fetch('/login', {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Accept": "application/json"
            },
            body: JSON.stringify({
                email: email,
                password: pw,
            })
        })
            .then(response => {
                return response.json();
            })
            .then(json => {
                localStorage.setItem("accessToken", json.result.accessToken);
                window.location.href = '/';
            })
            .catch(err => {
                console.log(err);
            })
    }

    axios.interceptors.request.use(function (config) {
        const accessToken = localStorage.getItem('accessToken');
        if (accessToken) {
            config.headers.Authorization = 'Bearer' + ' ' + accessToken
        }
        return config;
    })

    axios.interceptors.response.use(
        success => success,
        async (error) => {
            console.log(error);
            const status = error.response.status

            if (status === 401) {
                const originRequest = error.config

                await axios.post('/reissue')
                    .then(response => {
                        console.log(response.data);
                        localStorage.setItem("accessToken", response.data);
                        originRequest.headers.authorization = 'Bearer ' + response.data;
                        return axios(originRequest);
                    })
                    .catch(error => {
                        console.log('재발급 실패, refresh token 만료');
                        localStorage.removeItem('accessToken')
                        window.location.href = '/';
                    })
                return Promise.reject(error)
            }
        }
    )
</script>

<!-- 프로필 수정 부분 -->
<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("pic-btn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function () {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    <!-- 이미지 파일 넣는 부분 (모달창 내부) -->
    // Get elements
    var fileInput = document.getElementById("fileInput");
    var uploadBtn = document.getElementById("uploadBtn");
    var imagePreview = document.getElementById("imagePreview");

    // Handle file input change
    fileInput.addEventListener("change", function () {
        // Get selected files
        var files = fileInput.files;

        // Clear preview
        imagePreview.innerHTML = "";

        // Display thumbnails
        for (var i = 0; i < files.length; i++) {
            // Only process image files
            if (!files[i].type.startsWith("image")) {
                continue;
            }

            // Create thumbnail
            var thumbnail = document.createElement("div");
            thumbnail.classList.add("thumbnail");
            var image = document.createElement("img");
            image.src = URL.createObjectURL(files[i]);
            thumbnail.appendChild(image);
            imagePreview.appendChild(thumbnail);
        }
    });

    // Handle upload button click
    uploadBtn.addEventListener("click", function () {
        // Get selected files
        var files = fileInput.files;

        // Check if files were selected
        if (files.length === 0) {
            alert("Please select some files to upload.");
            return;
        }

        // Upload files here (using fetch, XHR, or any other method)
        // ...

        // Clear file input
        fileInput.value = "";

        // Clear preview
        imagePreview.innerHTML = "";
    });

</script>
</html>
