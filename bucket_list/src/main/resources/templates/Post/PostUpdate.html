<!DOCTYPE html>
<html lang="en">
<style>
  .select {
    padding: 15px 10px;
  }
  .select input[type=radio]{
    display: none;
  }
  .select input[type=radio]+label{
    display: inline-block;
    cursor: pointer;
    height: 24px;
    width: 90px;
    border: 1px solid #333;
    line-height: 24px;
    text-align: center;
    font-weight:bold;
    font-size:13px;
  }
  .select input[type=radio]+label{
    background-color: #fff;
    color: #333;
  }
  .select input[type=radio]:checked+label{
    background-color: #333;
    color: #fff;
  }
</style>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시물 수정</title>
</head>
<body>
<!-- checked="checked" -->
<div class="select">
  <input type="radio" id="korea" name="race" onclick="showDiv(this);" ><label for="korea">Korea</label>
  <input type="radio" id="world" name="race"  onclick="showDiv(this);"><label for="world">World</label>
</div>

<div id = "koreaBox" class="box" style="display: none">
  <table>
    <tr>
      <th>상태</th>
      <td><input type="text" name="post" list="statuslist"/></td>
      <datalist id = "statuslist">
        <option value="JOIN">모집중</option>
        <option value="JOINED">모집완료</option>
        <option value="PROCESS">진행중</option>
        <option value="COMPLETE">진행완료</option>
      </datalist>
    </tr>
    <tr>
      <th>제목</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>모집기간</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>버킷 시작일</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>버킷 종료일</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>비용</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>모집인원</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>카테고리</th>
      <td><input type="text" name="post" list="dl"/></td>
      <datalist id = "dl">
        <option value="TRAVEL">여행</option>
        <option value="SPORTS">레저스포츠</option>
        <option value="STUDY">공부</option>
        <option value="DELIGHT">행복</option>
        <option value="EXPERIENCE">도전</option>
        <option value="ETC">기타</option>
      </datalist>
    </tr>
    <tr>
      <th>주소</th>
      <td><input type="text" id="address_kakao" name="post" readonly /></td>
    </tr>
    <tr>
      <th>내용</th>
      <td><input type="text" name="post"/></td>
    </tr>
  </table>
</div>
<div name = "form" id = "worldBox" class="box" style="display: none">
  <table>
    <tr>
      <th>상태</th>
      <td><input type="text" name="post" list="statuslist2"/></td>
      <datalist id = "statuslist2">
        <option value="JOIN">모집중</option>
        <option value="JOINED">모집완료</option>
        <option value="PROCESS">진행중</option>
        <option value="COMPLETE">진행완료</option>
      </datalist>
    </tr>
    <tr>
      <th>제목</th>
      <td><input type="text" id="title" name="post"/></td>
    </tr>
    <tr>
      <th>모집기간</th>
      <td><input type="text" id="untilRecruit" name="post"/></td>
    </tr>
    <tr>
      <th>버킷 시작일</th>
      <td><input type="text" name="post" /></td>
    </tr>
    <tr>
      <th>버킷 종료일</th>
      <td><input type="text" name="post"/></td>
    </tr>
    <tr>
      <th>비용</th>
      <td><input type="text" name="post" /></td>
    </tr>
    <tr>
      <th>모집인원</th>
      <td><input type="text" id="member" name="post"/></td>
    </tr>
    <tr>
      <th>카테고리</th>
      <td><input type="text" name="post" list="dl2"/></td>
      <datalist id = "dl2">
        <option value="TRAVEL">여행</option>
        <option value="SPORTS">레저스포츠</option>
        <option value="STUDY">공부</option>
        <option value="DELIGHT">행복</option>
        <option value="EXPERIENCE">도전</option>
        <option value="ETC">기타</option>
      </datalist>
    </tr>
    <tr>
      <th>영문 주소</th>
      <td><input type="text" id="address" name="post"/></td>
    </tr>
    <tr>
      <th>내용</th>
      <td><input type="text" name="post"/></td>
    </tr>
  </table>
</div>
<input type="submit" id="submit" value="입력" >
</body>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<!-- 주소 검색 api 사용-->
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
      //카카오 지도 발생
      new daum.Postcode({
        oncomplete: function(data) { //선택시 입력값 세팅
          document.getElementById("address_kakao").value = data.address; // 주소 넣기
          document.querySelector("input[name=post]").focus(); //상세입력 포커싱
        }
      }).open();
    });
  }


  <!-- 라디오 버튼 클릭시 동작 -->
  function showDiv(element){
    var tag = document.getElementsByClassName("box");   // class 이름이 box인 값들을 가져옴

    for(var i =0; i<tag.length; i++){     // tag[0] = koreanBox, tag[1] = foreignerBox
      if(element.id+"Box"== tag[i].id)    // korean+"Box"가 tag[0]의 값과 같을때 해당 div 출력
        tag[i].style.display = "block";
      else                                // 다르다면 div 숨기기
        tag[i].style.display = "none";
    }
    const dataString = window.localStorage.getItem('data');
    var title = dataString.at(1);
    alert(title);
  }
</script>



<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
      //카카오 지도 발생
      new daum.Postcode({
        oncomplete: function(data) { //선택시 입력값 세팅
          document.getElementById("address_kakao").value = data.address; // 주소 넣기
          document.querySelector("input[name=post]").focus(); //상세입력 포커싱
        }
      }).open();
    });
  }


  <!-- 라디오 버튼 클릭시 동작 -->
  function showDiv(element){
    var tag = document.getElementsByClassName("box");   // class 이름이 box인 값들을 가져옴

    for(var i =0; i<tag.length; i++){     // tag[0] = koreanBox, tag[1] = foreignerBox
      if(element.id+"Box"== tag[i].id)    // korean+"Box"가 tag[0]의 값과 같을때 해당 div 출력
        tag[i].style.display = "block";
      else                                // 다르다면 div 숨기기
        tag[i].style.display = "none";
    }
  }

  $(document).ready(function(){
    $("#submit").click(function() {

      // 게시물 배열 선언
      let arr = [];

      $('input[name="post"]').each(function(index,item){ // 모든 값 배열에 저장
        arr.push($(item).val());
      });


      var finddata = $("#address_kakao").val();   // 국내 주소 값 저장

      if(finddata.length <1){     // 만약 국내 주소 값의 크기가 1보다 작을때, 즉 국내에서 데이터를 작성한 것이 아닐때
        alert("world data")
        var WorldData = {       // 해외 데이터
          "status" : arr[10],
          "title" : arr[11],       // 제목
          "untilRecruit" : arr[12],    // 모집종료 날짜
          "eventStart" : arr[13],       // 시작일
          "eventEnd" : arr[14],          // 종료일
          "cost" : arr[15],              // 비용
          "entrantNum" : arr[16],         // 모집인원
          "category" : arr[17],       // 카테고리
          "location" : arr[18],        // 장소
          "content" : arr[19]         // 내용
        }

        //ajax 호출
        $.ajax({
          type        :   "post",
          url         :   "/post/detailpost",
          headers : {
            "Content-Type" : "application/json"
          },
          dataType    :   "text",
          // contentType :   "application/json",
          data        :   JSON.stringify(WorldData),
          async : false,
          success     :   function(data){
            console.log(data);
            let url = '/map?postId=${data}';
            window.location.replace(url);
          }
        });
      }

      else{           // 국내에서 작성했을때
        alert("korea data")
        var KoreaData = {         // 한국 데이터
          "status" : arr[0],
          "title" : arr[1],       // 제목
          "untilRecruit" : arr[2],    // 모집종료 날짜
          "eventStart" : arr[3],       // 시작일
          "eventEnd" : arr[4],          // 종료일
          "cost" : arr[5],              // 비용
          "entrantNum" : arr[6],         // 모집인원
          "category" : arr[7],       // 카테고리
          "location" : arr[8],        // 장소
          "content" : arr[9]         // 내용
        }

        //ajax 호출
        $.ajax({
          type        :   "post",
          url         :   "/post/detailpost",
          headers : {
            "Content-Type" : "application/json",
          },
          dataType    :   "text",
          // contentType :   "application/json",
          data        :   JSON.stringify(KoreaData),
          async : false,
          success     :   function(data){      // server에서 결과값 받아옴
            let url = "/post/"+data;
            window.location.replace(url);     // ajax에서 redirect 진행
          }
        });
      }
    })
  });
</script>
</html>