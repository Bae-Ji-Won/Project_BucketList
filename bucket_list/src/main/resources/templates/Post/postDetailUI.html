<!DOCTYPE html>

<html lang="en">

<head>

  <!-- SITE TITTLE -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>BucketList</title>

  <!-- Plugins css Style -->
  <link href='/assets/plugins/fontawesome-5.15.2/css/all.min.css' rel='stylesheet'>
  <link href='/assets/plugins/fontawesome-5.15.2/css/fontawesome.min.css' rel='stylesheet'>
  <link href="/assets/plugins/animate/animate.css" rel="stylesheet">
  <link href="/assets/plugins/menuzord/css/menuzord.css" rel="stylesheet">
  <link href="/assets/plugins/menuzord/css/menuzord-animations.css" rel="stylesheet">


  <link href='/assets/plugins/fancybox/jquery.fancybox.min.css' rel='stylesheet'>



  <link href='/assets/plugins/rateyo/jquery.rateyo.min.css' rel='stylesheet'>




  <link href='/assets/plugins/owl-carousel/owl.carousel.min.css' rel='stylesheet' media='screen'>
  <link href='/assets/plugins/owl-carousel/owl.theme.default.min.css' rel='stylesheet' media='screen'>


  <!-- GOOGLE FONT -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700' rel='stylesheet'>

  <!-- CUSTOM CSS -->
  <link href="/assets/css/star.css" id="option_style" rel="stylesheet">
  <link href="/assets/css/custom.css" id="custom_style" rel="stylesheet">


  <!-- FAVICON -->
  <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->


  <!-- axios, jquery 사용-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <!-- 구글 맵 사용 -->
  <!-- 맵 api key 삭제해야함 서버에서 환경변수값을 넘겨줘야 함-->
  <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyBnEbknTcJ0sg7EJiuKhDkP8fNEke7HNMU" ></script>

  <style>
    #map_ma {width:100%; height:400px; clear:both; border:solid 1px red;}
  </style>

  <script type="text/javascript">
    $(document).ready(function() {

      <!-- PostId에 따른 데이터 호출하기 -->
      const postId = new URL(window.location.href).pathname.replace("/post/", "");

      console.log(postId);
      // axios header에 넣을 데이터
      const axiosConfig = {
        headers:{
          "Content-Type": "application/json"
        }
      }

      let jsonState;        // Json 반환 상태(성공인지 에러인지)
      let jsonResult;       // Json 반환 값 저장
      let jsonCommentState;        // Json 댓글 반환 상태(성공인지 에러인지)
      let jsonCommentResult;       // Json 댓글 반환 값 저장
      let title;
      let userName;    //  => writer로 사용 유저 아이디이름
      let content;
      let cost;
      var location;
      var lat;
      var lng;
      let untilRecruit;
      let entrantNum;
      let eventStart;
      let eventEnd;
      let status;
      let category;
      let fileName;


      const getdata = async()=>{
        try{
          const response = await axios.get('/post/'+postId+'/json');
          const commentresponse = await axios.get('/comment/'+postId+'/comments');
          console.log(response);     // json 데이터 받아온거
          jsonState = response.data.resultCode;
          jsonCommentState = commentresponse.data.resultCode;

          console.log(jsonState);
          console.log(jsonCommentState);

          if(jsonCommentState == "SUCCESS") {



          }else
            alert("서버 반환값 Error임 404페이지 이동");

          if(jsonState == "SUCCESS") {

            jsonResult = response.data.result;
            console.log(jsonResult);

            title = jsonResult.title;
            userName = jsonResult.userName;
            content = jsonResult.content;
            cost = jsonResult.cost;
            location = jsonResult.location;
            lat = jsonResult.lat;
            lng = jsonResult.lng;
            untilRecruit = jsonResult.untilRecruit;
            entrantNum = jsonResult.entrantNum;
            eventStart = jsonResult.eventStart;
            eventEnd = jsonResult.eventEnd;
            status = jsonResult.status;
            category = jsonResult.category;
            fileName = jsonResult.fileName;


            googlemap(lat,lng,location,title,content);
            console.log(lat);
            console.log(lng);

            var htmlentrantNum = document.getElementById("entrantNum");
            htmlentrantNum.innerHTML = "현재 인원 :" + "("+entrantNum +"/"+entrantNum+")";

            var htmltitle = document.getElementById("title");
            htmltitle.innerHTML = title;

            var htmluserName = document.getElementById("writer");
            htmluserName.innerHTML = userName;

            var htmluntil = document.getElementById("untilRecruit");
            htmluntil.innerHTML = "모집기간 : "+ untilRecruit;

            var htmlevent = document.getElementById("eventStart");
            htmlevent.innerHTML = "일정 : "+eventStart +" ~ "+eventEnd;

            var htmlcost = document.getElementById("cost");
            htmlcost.innerHTML = "비용 : " + cost;

            var htmllocation = document.getElementById("location");
            htmllocation.innerHTML = "장소 : " + location;

            var htmlcontent = document.getElementById("content");
            htmlcontent.innerHTML = content;

            document.getElementById("image_box").src = 'https://bucketlist-post-image-bucket.s3.ap-northeast-2.amazonaws.com/' + fileName;
            // }
            //
            // onload();

            console.log(location);
          }else
            alert("서버 반환값 Error임 404페이지 이동");


        }catch (ERROR){
          alert("404 에러");
        }
      }


      const googlemap = function(lat,lng,location,title,content){

        var myLatlng = new google.maps.LatLng(lat,lng); // 위치값 위도 경도
        var Y_point			= lat;		// Y 좌표
        var X_point			= lng;		// X 좌표
        var zoomLevel		= 18;				// 지도의 확대 레벨 : 숫자가 클수록 확대정도가 큼
        var markerTitle		= location;		// 현재 위치 마커에 마우스를 오버을때 나타나는 정보
        var markerMaxWidth	= 300;				// 마커를 클릭했을때 나타나는 말풍선의 최대 크기


// 말풍선 내용
        var contentString	= '<div>' +
                '<h2 id="pintitle">hello</h2>'+
                '<p id="pincontent">test입니다</p>' +

                '</div>';


        var myLatlng = new google.maps.LatLng(Y_point, X_point);
        var mapOptions = {
          zoom: zoomLevel,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById('map_ma'), mapOptions);
        var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: markerTitle
        });
        var infowindow = new google.maps.InfoWindow(
                {
                  content: contentString,
                  maxWizzzdth: markerMaxWidth
                }
        );
        google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map, marker);
        });
      }

      getdata();

      <!-- 좋아요 -->
      console.log('getLike');
      axios.get('/post/' + postId + '/likes/check')
              .then((res) => {
                console.log(res.data);
                let likeCheck = res.data.result;
                let $likeBtn =$('.icon.heart');
                if (likeCheck == 1){
                  $likeBtn.toggleClass('active');
                  $likeBtn.find('img').attr({
                    'src': '/assets/img/like/full-heart.png',
                    alt:'찜하기 완료'
                  });
                }
              })
              .catch((err) => {
                console.log(err);
              });

      axios.get('/post/' + postId + '/likes')
              .then((res) => {
                console.log(res.data);
                let cntLike = res.data.result;
                document.getElementById("cntLike").innerText = cntLike;
              })
              .catch((err) => {
                console.log(err);
              });



    });
  </script>

</head>

<body id="body" class="up-scroll">

<!-- ====================================
——— HEADER
===================================== -->
<header class="header" id="pageTop">
  <!-- Menu Zord -->
  <nav class="nav-menuzord navbar-sticky">
    <div class="container clearfix">
      <div id="menuzord" class="menuzord">
        <a href="/" class="menuzord-brand">
          <img class="lazyestload" data-src="/assets/img/logo-color-big.png" src="/assets/img/logo-color-big.png" alt="logo-img">
        </a>

        <ul class="menuzord-menu menuzord-right">
          <li class="">
            <a class="" href="javascript:void(0)">멤버십</a>
          </li>

            <li class="">
              <a class="" href="javascript:void(0)">버킷리스트</a>
              <ul class="dropdown drop-up">
                <li class="">
                  <a href="/post">All</a>
                </li>

                <li class="">
                  <a href="/post?category=travel">Travel</a>
                </li>

                <li class="">
                  <a href="/post?category=extreme">Extreme</a>
                </li>

                <li class="">
                  <a href="/post?category=study">Study</a>
                </li>

                <li class="">
                  <a href="/post?category=volunteer">Volunteer</a>
                </li>

                <li class="">
                  <a href="/post?category=experience">Experience</a>
                </li>

                <li class="">
                  <a href="/post?category=etc">Etc</a>
                </li>
              </ul>
            </li>

          <li class="" id="login_li">
            <a class="" href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#login">로그인</a>
          </li>

            <li class="" id="user_li">
              <a class="" href="javascript:void(0)" id="userName">유저명</a>
              <ul class="dropdown drop-up">
                <li class="">
                  <a href="/post/createform">버킷리스트 작성</a>
                </li>

                <li class="">
                  <a href="/my/likes">좋아요</a>
                </li>

                <li class="">
                  <a href="/my">마이 피드</a>
                </li>

              <li class="">
                <a href="index-3.html">마이페이지</a>
              </li>

              <li class="">
                <a href="#" onclick="logout(); return false;">로그아웃</a>
              </li>
            </ul>
          </li>

        </ul>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper packages-list-left-sidebar">


  <!-- ====================================
  ———	PAGE TITLE
  ===================================== -->
  <section class="page-title">
    <div class="page-title-img bg-img bg-overlay-darken" style="background-image: url(/assets/img/pages/page-title-bg13.jpg);">
      <div class="container">
        <div class="row align-items-center justify-content-center" style="height: 200px;">
          <div class="col-lg-6">
            <div class="page-title-content">
              <div class="title-border">
                <h2 class="text-uppercase text-white font-weight-bold">모집중</h2>
              </div>
              <p class="text-white mb-0" id="entrantNum">현재 인원 : (3 / 5)</p>
              <div class="right_area pt-2" style="display: flex; justify-content: center">
                <a href="javascript:void(0);" class="icon heart">
                  <img src="/assets/img/like/blank-heart.png" alt="찜하기">
                </a>
                <div class="cntLike">
                  <p id="cntLike">0</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- ====================================
  ———	PACKAGES SECTION
  ===================================== -->
  <section class="py-8">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="mt-n7" style="float: right">
            <button type="button" class="btn btn-outline-dark mb-2" style="padding: 8px 18px">수정</button>
            <button type="button" class="btn btn-outline-dark mb-2" style="padding: 8px 18px">삭제</button>
          </div>
          <div>
            <h2 class="text-uppercase mb-2" id="title"></h2>
            <h4 class="text-uppercase mb-5" id="writer"></h4>

            <div class="mb-5">
              <div class="row">
                <div class="col-md-12">
                  <ul class="list-unstyled mb-0">
                    <li class="media">
                      <div class="text-gray-color me-2">
                        <i class="far fa-dot-circle" aria-hidden="true"></i>
                      </div>
                      <div class="media-body">
                        <p id="untilRecruit"></p>
                      </div>
                    </li>


                    <li class="media">
                      <div class="text-gray-color me-2">
                        <i class="far fa-dot-circle" aria-hidden="true"></i>
                      </div>
                      <div class="media-body">
                        <p id="eventStart"></p>
                      </div>
                    </li>

                    <li class="media">
                      <div class="text-gray-color me-2">
                        <i class="far fa-dot-circle" aria-hidden="true"></i>
                      </div>
                      <div class="media-body">
                        <p id="cost"></p>
                      </div>
                    </li>

                    <li class="media">
                      <div class="text-gray-color me-2">
                        <i class="far fa-dot-circle" aria-hidden="true"></i>
                      </div>
                      <div class="media-body">
                        <p id="location"></p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="mb-6">
            <div class="row">

              <!-- 구글 맵 출력 부분-->
              <div style="width:400px; height:400px;" id="map_ma"></div>

              <!-- 이미지 출력 부분 -->
              <div id="package-slider" class="owl-carousel owl-theme package-slider col-md-6">
                <div class="item">
                  <img id="image_box" class="lazyestload" data-src="/assets/img/packages/package-slider-03.jpg" src="/assets/img/packages/package-slider-03.jpg" alt="image">
                </div>

                <div class="item">
                  <img class="lazyestload" data-src="/assets/img/packages/package-slider-04.jpg" src="/assets/img/packages/package-slider-04.jpg" alt="image">
                </div>

                <div class="item">
                  <img class="lazyestload" data-src="/assets/img/packages/package-slider-05.jpg" src="/assets/img/packages/package-slider-05.jpg" alt="image">
                </div>
              </div>
            </div>
            <p class="my-6" id="content">설명 내용</p>
          </div>

          <div class="mb-5" style="display: flex; justify-content: center">
            <button type="button" class="btn btn-primary mb-2" onclick="goToApplication()">참가하기</button>
          </div>

          <div class="comment-box">
            <form class="">
              <h3 class="text-uppercase mb-6">댓글 (댓글 수?)</h3>

              <div class="form-group mb-2">
                <textarea class="form-control border-0 bg-smoke" placeholder="Comment" rows="3"></textarea>
              </div>

              <div style="display: flex; justify-content: right">
                <button type="button" class="btn btn-outline-info-comment-button mb-2" style="padding: 8px 18px">
                  등록
                </button>
              </div>
            </form>

            <ul class="comment-list">
              <li class="comment-item" id="comment1">       <!-- id값 중복되면 안됨 -->
                <a class="me-n4 comment-tool" id="navbarDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">. . .</a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">수정</a></li>
                  <li><a class="dropdown-item" href="#">삭제</a></li>
                </ul>
                <div>
                  <div>
                    <p class="comment-username">닉네임</p>
                  </div>
                  <div>
                    <p class="comment-content">이름 : 댓글</p>
                  </div>
                  <div>
                    <p class="comment-date">작성일자</p>
                    <a class="comment-date" onclick="showCommentReply('comment1-1')">댓글쓰기</a>   <!-- 아래 id값과 같아야함-->
                    <form class="comment-reply-form" id="comment1-1" style="display: none;">      <!-- comment1은 부모댓글과 같아야하고 그 뒤에 숫자는 한개씩 출력되야함 -->
                      <div class="form-group mb-2">
                        <textarea class="form-control border-0 bg-smoke" placeholder="Comment" rows="2"></textarea>
                      </div>

                      <div style="display: flex; justify-content: right">
                        <button type="button" class="btn btn-outline-info-comment-button mb-2" style="padding: 8px 18px">
                          등록
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </li>
              <li class="comment-reply" id="comment2">
                <a class="me-n4 comment-tool" id="navbarDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">. . .</a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">수정</a></li>
                  <li><a class="dropdown-item" href="#">삭제</a></li>
                </ul>
                <div>
                  <div>
                    <p class="comment-username">닉네임</p>
                  </div>
                  <div>
                    <p class="comment-content">이름 : 댓글</p>
                  </div>
                  <div>
                    <p class="comment-date">작성일자</p>
                    <a class="comment-date" onclick="showCommentReply('comment2-1')">댓글쓰기</a>
                    <form class="comment-reply-form" id="comment2-1" style="display: none;">
                      <div class="form-group mb-2">
                        <textarea class="form-control border-0 bg-smoke" placeholder="Comment" rows="2"></textarea>
                      </div>

                      <div style="display: flex; justify-content: right">
                        <button type="button" class="btn btn-outline-info-comment-button mb-2" style="padding: 8px 18px">
                          등록
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </li>
              <li class="comment-item" id="comment3">
                <a class="me-n4 comment-tool" id="navbarDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">. . .</a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">수정</a></li>
                  <li><a class="dropdown-item" href="#">삭제</a></li>
                </ul>
                <div>
                  <div>
                    <p class="comment-username">닉네임</p>
                  </div>
                  <div>
                    <p class="comment-content">이름 : 댓글</p>
                  </div>
                  <div>
                    <p class="comment-date">작성일자</p>
                    <a class="comment-date" onclick="showCommentReply('comment3-1')">댓글쓰기</a>
                    <form class="comment-reply-form" id="comment3-1" style="display: none;">
                      <div class="form-group mb-2">
                        <textarea class="form-control border-0 bg-smoke" placeholder="Comment" rows="2"></textarea>
                      </div>

                      <div style="display: flex; justify-content: right">
                        <button type="button" class="btn btn-outline-info-comment-button mb-2" style="padding: 8px 18px">
                          등록
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </li>
              <li class="comment-item" id="comment4">
                <a class="me-n4 comment-tool" id="navbarDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">. . .</a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">수정</a></li>
                  <li><a class="dropdown-item" href="#">삭제</a></li>
                </ul>
                <div>
                  <div>
                    <p class="comment-username">닉네임</p>
                  </div>
                  <div>
                    <p class="comment-content">이름 : 댓글</p>
                  </div>
                  <div>
                    <p class="comment-date">작성일자</p>
                    <a class="comment-date" onclick="showCommentReply('comment4-1')">댓글쓰기</a>
                    <form class="comment-reply-form" id="comment4-1" style="display: none;">
                      <div class="form-group mb-2">
                        <textarea class="form-control border-0 bg-smoke" placeholder="Comment" rows="2"></textarea>
                      </div>

                      <div style="display: flex; justify-content: right">
                        <button type="button" class="btn btn-outline-info-comment-button mb-2" style="padding: 8px 18px">
                          등록
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>


</div><!-- element wrapper ends -->

<!-- ====================================
——— FOOTER SECTION
===================================== -->
<footer class="footer">
  <div class="footer-bg-color py-9">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-3 mb-7 mb-lg-0">
          <a class="d-inline-block" href="index.html">
            <img class="w-100 mb-6 lazyestload" data-src="/assets/img/logo-color-sm.png" src="/assets/img/logo-color-sm.png" alt="img">
          </a>
          <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute</p>
        </div>

        <div class="col-md-6 col-lg-3 mt-md-4 mb-7 mb-lg-0">
          <div class="title-tag">
            <h6>Contact us</h6>
          </div>

          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit sed do eiusmod.</p>
          <ul class="list-unstyled mb-0">
            <li class="media mb-2">
              <div class="me-3">
                <i class="fa fa-home" aria-hidden="true"></i>
              </div>
              <div class="media-body">
                <a href="contact.html">61 Park Street, Fifth Avenue, NY</a>
              </div>
            </li>

            <li class="media mb-2">
              <div class="me-3">
                <i class="fas fa-phone-alt" aria-hidden="true"></i>
              </div>
              <div class="media-body">
                <a href="tel:88657524332">[88] 657 524 332</a>
              </div>
            </li>

            <li class="media">
              <div class="me-3">
                <i class="far fa-envelope" aria-hidden="true"></i>
              </div>
              <div class="media-body">
                <a href="mailTo:info@star-travel.com">info@star-travel.com</a>
              </div>
            </li>
          </ul>
        </div>

        <div class="col-md-6 col-lg-3 mt-lg-4 mb-7 mb-md-0">
          <div class="title-tag pb-1">
            <h6>Gallery</h6>
          </div>

          <div class="row me-auto gallery mb-2 mb-md-0">
            <div class="col-4 mb-3">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-1.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-1.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-1.jpg"></a>
                </div>
              </div>
            </div>

            <div class="col-4 mb-3">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-2.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-2.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-2.jpg"></a>
                </div>
              </div>
            </div>

            <div class="col-4 mb-3">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-3.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-3.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-3.jpg"></a>
                </div>
              </div>
            </div>

            <div class="col-4">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-4.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-4.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-4.jpg"></a>
                </div>
              </div>
            </div>

            <div class="col-4">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-5.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-5.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-5.jpg"></a>
                </div>
              </div>
            </div>

            <div class="col-4">
              <div class="media media-hover">
                <div class="content w-100">
                  <img class="media-img lazyestload" data-src="/assets/img/home/gallery/thumb-gallery-6.jpg"
                       src="/assets/img/home/gallery/thumb-gallery-6.jpg" alt="gallery-img">
                  <a class="media-img-overlay" data-fancybox="footer-gallery" href="/assets/img/home/gallery/gallery-6.jpg"></a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mt-lg-4">
          <div class="title-tag">
            <h6>Newsletter</h6>
          </div>

          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit sed do.</p>

          <form class="mb-6" action="index.html" method="post">
            <div class="input-group input-group-sm">
              <input type="email" class="form-control form-control-sm form-transparent" required="" placeholder="Enter your email" aria-label="Enter your email">
              <button class="btn border-0 btn btn-append hover-bg-primary" type="submit">
                <i class="fas fa-long-arrow-alt-right text-white ltr" aria-hidden="true"></i>
              </button>
            </div>
          </form>

          <ul class="list-inline d-flex mb-0">
            <li class="me-3 me-lg-2 me-xl-3">
              <a class="icon-default icon-border rounded-circle hover-bg-primary" href="javascript:void(0)">
                <i class="fab fa-facebook-f text-white" aria-hidden="true"></i>
              </a>
            </li>

            <li class="me-3 me-lg-2 me-xl-3">
              <a class="icon-default icon-border rounded-circle hover-bg-primary" href="javascript:void(0)">
                <i class="fab fa-twitter text-white" aria-hidden="true"></i>
              </a>
            </li>

            <li class="me-3 me-lg-2 me-xl-3">
              <a class="icon-default icon-border rounded-circle hover-bg-primary" href="javascript:void(0)">
                <i class="fab fa-google-plus-g text-white" aria-hidden="true"></i>
              </a>
            </li>

            <li class="me-3 me-lg-2 me-xl-3">
              <a class="icon-default icon-border rounded-circle hover-bg-primary" href="javascript:void(0)">
                <i class="fab fa-pinterest-p text-white" aria-hidden="true"></i>
              </a>
            </li>

            <li class="">
              <a class="icon-default icon-border rounded-circle hover-bg-primary" href="javascript:void(0)">
                <i class="fab fa-vimeo-v text-white" aria-hidden="true"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="copyright py-6">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 order-1 order-md-0">
          <p class="mb-0 mb-md-0 text-md-start">Copyright &copy; <span id="copy-year"></span> All Rights Reserved by
            <a href="http://www.iamabdus.com/" target="_blank">Abdus</a>
          </p>
        </div>

        <div class="col-md-6">
          <ul class="list-inline text-capitalize d-flex align-items-center justify-content-md-end justify-content-center mb-md-0">
            <li class="me-3">
              <a href="setting.html">Privacy policy</a>
            </li>

            <li class="me-3">
              <a href="about-us.html">About us</a>
            </li>

            <li class="me-3">
              <a href="contact.html">Support</a>
            </li>

            <li class="">
              <a href="blog-single-right-sidebar.html">Blog</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    var d = new Date();
    var year = d.getFullYear();
    document.getElementById("copy-year").innerHTML = year;
  </script>
</footer>


<!-- ====================================
——— MODAL SECTION
===================================== -->
<!-- Signup Modal -->
<div class="modal fade" id="signup" tabindex="-1" role="dialog" aria-label="signupModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header rounded">
        <h3 class="modal-title text-uppercase font-weight-bold">회원가입</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form onsubmit="join(); return false;">
          <div class="mb-3">
            <div class="mb-3" style="display: flex">
              <input type="text" id="form_userName" class="form-control bg-smoke" required="" placeholder="닉네임">
              <button class="btn btn-facebook btn-block text-uppercase text-white" onclick="checkUserName()" style="width: 25%; padding: 0">중복확인</button>
            </div>
            <p id="able_userName" style="display: none">사용 가능한 닉네임 입니다.</p>
            <p id="error_userName" style="display: none">중복되는 닉네임 입니다.</p>
          </div>

          <div class="mb-3">
            <input type="password" id="pw" class="form-control bg-smoke" required="" placeholder="비밀번호">
            <input type="password" id="check_pw" onchange="checkPasswordCorrect()" class="form-control bg-smoke" required="" placeholder="비밀번호 확인">
            <p id="error_passwordCorrect" style="display: none">일치하지 않습니다.</p>
          </div>

          <div class="mb-3">
            <select id="form_gender" class="form-control bg-smoke">
              <option value="">성별</option>
              <option value="MAN">남자</option>
              <option value="WOMAN">여자</option>
            </select>
            <p id="error_gender" style="display: none">성별을 선택 해주세요.</p>
          </div>

          <div class="mb-3">
            <input type="number" id="age" class="form-control bg-smoke" required="" placeholder="나이">
          </div>
          <!--              <div class="mb-3" style="display: flex">-->
          <!--                <input style="flex: 1;" id="birth_year" type="year" class="form-control bg-smoke" required="" placeholder="년(4자)">-->
          <!--                <input style="flex: 1;" id="birth_month" type="month1" class="form-control bg-smoke" required="" placeholder="월">-->
          <!--                <input style="flex: 1;" id="birth_day" type="day" class="form-control bg-smoke" required="" placeholder="일">-->
          <!--              </div>-->

          <div class="mb-3">
            <div style="display: flex">
              <input style="flex: auto;" type="email" class="form-control bg-smoke" required="" placeholder="이메일" id="form_email">
              <button class="btn btn-facebook btn-block text-uppercase text-white" onclick="checkEmail()" style="width: 25%; padding: 0">인증요청</button>
            </div>
            <p id="error_email" style="display: none">중복된 이메일 입니다.</p>
            <input type="emailCheck" id="code" class="form-control bg-smoke" required="" placeholder="인증번호">
            <p id="error_code" style="display: none">인증 코드가 불일치 합니다.</p>

          </div>

          <div class="mb-3 form-check mb-0">
            <input type="checkbox" class="form-check-input" id="exampleCheck4">
            <label class="form-check-label text-gray-color mb-3" for="exampleCheck4">
              I agree to the terms of use and privacy.
            </label>
          </div>

          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-block text-uppercase">가입하기</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div class="modal fade" id="login" tabindex="-1" role="dialog" aria-label="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header rounded">
        <h3 class="modal-title text-uppercase font-weight-bold">로그인</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form class="" onsubmit="return false;">
          <div class="mb-3">
            <input type="email" id="email" class="form-control bg-smoke" required="" placeholder="이메일">
          </div>

          <div class="mb-3">
            <input type="password" id="password" class="form-control bg-smoke" required="" placeholder="비밀번호">
          </div>

          <!--              <div class="mb-3 form-check mb-0">-->
          <!--                <input type="checkbox" class="form-check-input" id="exampleCheck5">-->
          <!--                <label class="form-check-label text-gray-color mb-3" for="exampleCheck5">-->
          <!--                  Remember me-->
          <!--                </label>-->
          <!--                <a class="pull-right" href="javascript:void(0)">Fogot Password?</a>-->
          <!--             </div>-->
          <p id="login_error" style="display: none"></p>
          <div class="d-grid">
            <button class="btn btn-primary text-uppercase" onclick="login(); return false;">Login</button>
          </div>

          <div class="text-uppercase text-center py-3">Or</div>

          <div style="display: flex;">
            <div style="flex: 1;">
              <a href="/login/google"><img src="/assets/img/google-button.png" style="width: 95%; margin-left: 5%"></a>
            </div>
            <div style="flex: 1;">
              <a href="/login/naver"><img src="/assets/img/naver-button.png" style="width: 85%; float: right; margin-right: 10%"></a>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer justify-content-center">
        <p class="mb-1">Don’t have an Account? <a href="javascript:void(0)" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#signup">Sign up</a></p>
      </div>
    </div>
  </div>
</div>

<!-- INQUIRY IN MODAL -->
<div class="modal fade" id="inquiry" tabindex="-1" role="dialog" aria-label="inquiryModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header rounded">
        <h3 class="modal-title text-uppercase font-weight-bold">Inquiry about tour</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body pb-3">
        <form class="" action="index.html" method="post">
          <div class="mb-3">
            <input type="text" class="form-control bg-smoke" required="" placeholder="Your Name">
          </div>

          <div class="mb-3">
            <input type="email" class="form-control bg-smoke" required="" placeholder="Your Email">
          </div>

          <div class="mb-3">
            <input type="number" class="form-control bg-smoke" required="" placeholder="Phone Number">
          </div>

          <div class="mb-3">
            <textarea class="form-control bg-smoke" rows="6" placeholder="Message"></textarea>
          </div>

          <button type="submit" class="btn btn-primary text-uppercase">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Javascript -->
<script src="/assets/plugins/jquery/jquery-3.4.1.min.js"></script>
<script src="/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/plugins/menuzord/js/menuzord.js"></script>



<script src='/assets/plugins/fancybox/jquery.fancybox.min.js'></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>



<script>
  function showCommentReply(commentReplyId) {
    let search = document.getElementById(commentReplyId);
    let check = search.style.display;
    if(check == "none") {
      search.style.display="block";
    } else {
      search.style.display="none";
    }
  }
</script>

<script>
  //heart 좋아요 클릭시! 하트 뿅
  $(function(){
    var $likeBtn =$('.icon.heart');

    $likeBtn.click(function(){
      const postId = new URL(window.location.href).pathname.replace("/post/", "");
      console.log(postId);

      $likeBtn.toggleClass('active');
      if($likeBtn.hasClass('active')){
        axios.post('/post/' + postId + '/likes')
                .then((res) => {
                  console.log(res.data);

                  $(this).find('img').attr({
                    'src': '/assets/img/like/full-heart.png',
                    alt:'찜하기 완료'
                  });

                  axios.get('/post/' + postId + '/likes')
                          .then((res) => {
                            console.log(res.data);
                            let cntLike = res.data.result;
                            document.getElementById("cntLike").innerText = cntLike;
                          })
                          .catch((err) => {
                            console.log(err);
                          })
                })
                .catch((err) => {
                  console.log(err);
                  alert("로그인 후 이용해주세요.")
                })
      }else{
        axios.post('/post/' + postId + '/likes')
                .then((res) => {
                  console.log(res.data);

                  $(this).find('i').removeClass('fas').addClass('far')
                  $(this).find('img').attr({
                    'src': '/assets/img/like/blank-heart.png',
                    alt:"찜하기"
                  })

                  axios.get('/post/' + postId + '/likes')
                          .then((res) => {
                            console.log(res.data);
                            let cntLike = res.data.result;
                            document.getElementById("cntLike").innerText = cntLike;
                          })
                          .catch((err) => {
                            console.log(err);
                          })
                })
                .catch((err) => {
                  console.log(err);
                  alert("로그인 후 이용해주세요.")
                })
      }
    })
  })

  function goToApplication() {
    let accessToken = localStorage.getItem("accessToken")
    if (accessToken === null) {
      alert("로그인이 필요한 서비스 입니다.");
      window.location.reload();
    } else {
      const postId = new URL(window.location.href).pathname.replace("/post/", "");
      window.location.href = '/app/form/' + postId;
    }
  }

  axios.interceptors.request.use(function(config) {
    const accessToken = localStorage.getItem('accessToken');
    if(accessToken) {
      config.headers.Authorization = 'Bearer' + ' ' + accessToken
    }
    return config;
  })

  axios.interceptors.response.use(
          success => success,
          async(error) => {
            console.log(error);
            const status = error.response.status

            if(status === 401) {
              const originRequest = error.config

              await axios.post('/reissue')
                      .then(response => {
                        console.log(response.data);
                        localStorage.setItem("accessToken", response.data);
                        originRequest.headers.authorization = 'Bearer ' + response.data;
                        return axios(originRequest);
                      })
                      .catch(error => {
                        console.log('재발급 실패, refresh token 만료');
                        localStorage.removeItem('accessToken')
                        window.location.href = '/';
                      })
              return Promise.reject(error)
            }
          }
  )
</script>



<script src='/assets/plugins/rateyo/jquery.rateyo.min.js'></script>
<script src="/assets/plugins/lazyestload/lazyestload.js"></script>





<script src='/assets/plugins/owl-carousel/owl.carousel.min.js'></script>


<script src="/assets/plugins/smoothscroll/SmoothScroll.js"></script>
<script src="/assets/js/star.js"></script>

<script src="/assets/js/custom.js"></script>
<script src="/js/header.js"></script>

</body>
</html>

